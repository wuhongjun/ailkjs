define("seajq/typeahead/1.0.0/typeahead",["gallery/jquery/1.8.3/jquery"],function(a,b,c){var d=window.$||a("gallery/jquery/1.8.3/jquery"),e=function(a,b){this.$element=d(a),this.options=d.extend({},d.fn.typeahead.defaults,b),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=d(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var a=d.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:a.top+a.height,left:a.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=d.isFunction(this.source)?this.source(this.query,d.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(a){var b=this;return a=d.grep(a,function(a){return b.matcher(a)}),a=this.sorter(a),a.length?this.render(a.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var e,b=[],c=[],d=[];e=a.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(a){var b=this;return a=d(a).map(function(a,c){return a=d(b.options.item).attr("data-value",c),a.find("a").html(b.highlighter(c)),a[0]}),a.first().addClass("active"),this.$menu.html(a),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=d(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",d.proxy(this.focus,this)).on("blur",d.proxy(this.blur,this)).on("keypress",d.proxy(this.keypress,this)).on("keyup",d.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",d.proxy(this.keydown,this)),this.$menu.on("click",d.proxy(this.click,this)).on("mouseenter","li",d.proxy(this.mouseenter,this)).on("mouseleave","li",d.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(a){this.suppressKeyPressRepeat=~d.inArray(a.keyCode,[40,38,9,13,27]),this.move(a)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(a){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),d(a.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var f=d.fn.typeahead;d.fn.typeahead=function(a){return this.each(function(){var b=d(this),c=b.data("typeahead"),f="object"==typeof a&&a;c||b.data("typeahead",c=new e(this,f)),"string"==typeof a&&c[a]()})},d.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},d.fn.typeahead.Constructor=e,d.fn.typeahead.noConflict=function(){return d.fn.typeahead=f,this},e.autoinit=function(){d(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var b=d(this);b.data("typeahead")||b.typeahead(b.data())})},c.exports=e});